---
id: create-logs-metric
title: "Create a log-based metric"
description: "Create a metric based on your ingested logs in your organization."
sidebar_label: "Create a log-based metric"
hide_title: true
hide_table_of_contents: true
api: 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
sidebar_class_name: "post api-method"
info_path: docs/datadog/datadog-api-v-2-collection
custom_edit_url: null
---

<h1 className={"openapi__heading"}>Create a log-based metric</h1>

<MethodEndpoint method={"post"} path={"/api/v2/logs/config/metrics"}></MethodEndpoint>


Create a metric based on your ingested logs in your organization.Returns the log-based metric object from the request body when the request is successful.
## Request
<MimeTabs className={"openapi-tabs__mime request"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3><strong className={"openapi-schema__required"}>required</strong></summary><div className={"body-description-container"}><div className={"body-description"}>The definition of the new log-based metric.</div></div><ul style={{"marginLeft":"5px"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>data</strong><span className={"openapi-schema__name"}> object</span><span className={"openapi-schema__divider"}></span><span className={"openapi-schema__required"}>required</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The new log-based metric properties.</div><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>attributes</strong><span className={"openapi-schema__name"}> object</span><span className={"openapi-schema__divider"}></span><span className={"openapi-schema__required"}>required</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The object describing the Datadog log-based metric to create.</div><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>compute</strong><span className={"openapi-schema__name"}> object</span><span className={"openapi-schema__divider"}></span><span className={"openapi-schema__required"}>required</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The compute rule to compute the log-based metric.</div><SchemaItem collapsible={false} name={"aggregation_type"} required={true} schemaName={"LogsMetricComputeAggregationType"} qualifierMessage={"**Possible values:** [`count`, `distribution`]"} schema={{"description":"The type of aggregation to use.","enum":["count","distribution"],"example":"distribution","type":"string","x-enum-varnames":["COUNT","DISTRIBUTION"],"title":"LogsMetricComputeAggregationType"}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"The path to the value the log-based metric will aggregate on (only used if the aggregation type is a \"distribution\").","example":"@duration","type":"string"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>filter</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The log-based metric filter. Logs matching this filter will be aggregated in this metric.</div><SchemaItem collapsible={false} name={"query"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"default":"*","description":"The search query - following the log search syntax.","example":"service:web* AND @http.status_code:[200 TO 299]","type":"string"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>group_by</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The rules for the group by.</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}>Array [</div></li><SchemaItem collapsible={false} name={"path"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"The path to the value the log-based metric will be aggregated over.","example":"@http.status_code","type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"tag_name"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"Eventual name of the tag that gets created. By default, the path attribute is used as the tag name.","example":"status_code","type":"string"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={false} name={"id"} required={true} schemaName={"LogsMetricID"} qualifierMessage={undefined} schema={{"description":"The name of the log-based metric.","example":"logs.page.load.count","type":"string","title":"LogsMetricID"}}></SchemaItem><SchemaItem collapsible={false} name={"type"} required={true} schemaName={"LogsMetricType"} qualifierMessage={"**Possible values:** [`logs_metrics`]"} schema={{"default":"logs_metrics","description":"The type of the resource. The value should always be logs_metrics.","enum":["logs_metrics"],"example":"logs_metrics","type":"string","x-enum-varnames":["LOGS_METRICS"],"title":"LogsMetricType"}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem></MimeTabs>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>OK</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}} className={"response-body-description-container"}></div><ul style={{"marginLeft":"5px"}}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The log-based metric properties.</div><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>attributes</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The object describing a Datadog log-based metric.</div><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>compute</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The compute rule to compute the log-based metric.</div><SchemaItem collapsible={false} name={"aggregation_type"} required={false} schemaName={"LogsMetricResponseComputeAggregationType"} qualifierMessage={"**Possible values:** [`count`, `distribution`]"} schema={{"description":"The type of aggregation to use.","enum":["count","distribution"],"example":"distribution","type":"string","x-enum-varnames":["COUNT","DISTRIBUTION"],"title":"LogsMetricResponseComputeAggregationType"}}></SchemaItem><SchemaItem collapsible={false} name={"path"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"The path to the value the log-based metric will aggregate on (only used if the aggregation type is a \"distribution\").","example":"@duration","type":"string"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>filter</strong><span className={"openapi-schema__name"}> object</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The log-based metric filter. Logs matching this filter will be aggregated in this metric.</div><SchemaItem collapsible={false} name={"query"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"The search query - following the log search syntax.","example":"service:web* AND @http.status_code:[200 TO 299]","type":"string"}}></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>group_by</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div style={{"marginLeft":"5px"}} className={"schema-description-container"}><div className={"schema-description"}>The rules for the group by.</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}>Array [</div></li><SchemaItem collapsible={false} name={"path"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"The path to the value the log-based metric will be aggregated over.","example":"@http.status_code","type":"string"}}></SchemaItem><SchemaItem collapsible={false} name={"tag_name"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"description":"Eventual name of the tag that gets created. By default, the path attribute is used as the tag name.","example":"status_code","type":"string"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></div></details></SchemaItem><SchemaItem collapsible={false} name={"id"} required={false} schemaName={"LogsMetricID"} qualifierMessage={undefined} schema={{"description":"The name of the log-based metric.","example":"logs.page.load.count","type":"string","title":"LogsMetricID"}}></SchemaItem><SchemaItem collapsible={false} name={"type"} required={false} schemaName={"LogsMetricType"} qualifierMessage={"**Possible values:** [`logs_metrics`]"} schema={{"default":"logs_metrics","description":"The type of the resource. The value should always be logs_metrics.","enum":["logs_metrics"],"example":"logs_metrics","type":"string","x-enum-varnames":["LOGS_METRICS"],"title":"LogsMetricType"}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"data\": {\n    \"attributes\": {\n      \"compute\": {\n        \"aggregation_type\": \"distribution\",\n        \"path\": \"@duration\"\n      },\n      \"filter\": {\n        \"query\": \"service:web* AND @http.status_code:[200 TO 299]\"\n      },\n      \"group_by\": [\n        {\n          \"path\": \"@http.status_code\",\n          \"tag_name\": \"status_code\"\n        }\n      ]\n    },\n    \"id\": \"logs.page.load.count\",\n    \"type\": \"logs_metrics\"\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"400"} value={"400"}><div>Bad Request</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}} className={"response-body-description-container"}></div><ul style={{"marginLeft":"5px"}}><SchemaItem collapsible={false} name={"errors"} required={true} schemaName={"string[]"} qualifierMessage={undefined} schema={{"description":"A list of errors.","items":{"description":"A list of items.","example":"Bad Request","type":"string"},"type":"array"}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"errors\": [\n    \"Bad Request\"\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"403"} value={"403"}><div>Not Authorized</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}} className={"response-body-description-container"}></div><ul style={{"marginLeft":"5px"}}><SchemaItem collapsible={false} name={"errors"} required={true} schemaName={"string[]"} qualifierMessage={undefined} schema={{"description":"A list of errors.","items":{"description":"A list of items.","example":"Bad Request","type":"string"},"type":"array"}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"errors\": [\n    \"Bad Request\"\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"409"} value={"409"}><div>Conflict</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}} className={"response-body-description-container"}></div><ul style={{"marginLeft":"5px"}}><SchemaItem collapsible={false} name={"errors"} required={true} schemaName={"string[]"} qualifierMessage={undefined} schema={{"description":"A list of errors.","items":{"description":"A list of items.","example":"Bad Request","type":"string"},"type":"array"}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"errors\": [\n    \"Bad Request\"\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem><TabItem label={"429"} value={"429"}><div>Too many requests</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><div style={{"textAlign":"left","marginLeft":"1rem"}} className={"response-body-description-container"}></div><ul style={{"marginLeft":"5px"}}><SchemaItem collapsible={false} name={"errors"} required={true} schemaName={"string[]"} qualifierMessage={undefined} schema={{"description":"A list of errors.","items":{"description":"A list of items.","example":"Bad Request","type":"string"},"type":"array"}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"errors\": [\n    \"Bad Request\"\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      